// RiftParlayCircuit contract configuration
const DEPLOYED_ADDRESS = "0xE371f39894a7616C7ef1E666f00d23583FEAe210" as const;
const envAddress = (import.meta as any).env?.VITE_CIRCUIT_ADDRESS as `0x${string}` | undefined;
export const CIRCUIT_ADDRESS =
  envAddress && envAddress.startsWith("0x")
    ? envAddress
    : (DEPLOYED_ADDRESS as `0x${string}`);

// Pathline enum matching contract
export enum Pathline {
  Nova = 0,
  Ember = 1,
  Tidal = 2,
  Quake = 3
}

export const PathlineNames = ["Nova", "Ember", "Tidal", "Quake"] as const;
export const PathlineColors = {
  0: "#8b5cf6", // Nova - Purple
  1: "#f97316", // Ember - Orange
  2: "#3b82f6", // Tidal - Blue
  3: "#10b981", // Quake - Green
} as const;

// Contract constants
export const MIN_ENTRY_FEE = "0.0004"; // ETH
export const MIN_DURATION = 10 * 60; // 10 minutes in seconds
export const MAX_DURATION = 96 * 60 * 60; // 96 hours in seconds

// Contract ABI
export const CIRCUIT_ABI = [
  {
    inputs: [],
    name: "AlreadyClaimed",
    type: "error"
  },
  {
    inputs: [],
    name: "AlreadyEntered",
    type: "error"
  },
  {
    inputs: [],
    name: "AlreadySettled",
    type: "error"
  },
  {
    inputs: [],
    name: "CircuitExists",
    type: "error"
  },
  {
    inputs: [],
    name: "CircuitMissing",
    type: "error"
  },
  {
    inputs: [],
    name: "EntryMissing",
    type: "error"
  },
  {
    inputs: [],
    name: "InvalidDuration",
    type: "error"
  },
  {
    inputs: [],
    name: "InvalidFee",
    type: "error"
  },
  {
    inputs: [],
    name: "InvalidProof",
    type: "error"
  },
  {
    inputs: [],
    name: "Locked",
    type: "error"
  },
  {
    inputs: [],
    name: "NotCreator",
    type: "error"
  },
  {
    inputs: [],
    name: "NotLocked",
    type: "error"
  },
  {
    inputs: [],
    name: "NotRefundable",
    type: "error"
  },
  {
    inputs: [],
    name: "NotSettled",
    type: "error"
  },
  {
    inputs: [],
    name: "NotWinner",
    type: "error"
  },
  {
    anonymous: false,
    inputs: [
      {
        indexed: true,
        internalType: "string",
        name: "circuitId",
        type: "string"
      }
    ],
    name: "CircuitCancelled",
    type: "event"
  },
  {
    anonymous: false,
    inputs: [
      {
        indexed: true,
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        indexed: false,
        internalType: "string",
        name: "headline",
        type: "string"
      },
      {
        indexed: false,
        internalType: "uint256",
        name: "entryFee",
        type: "uint256"
      },
      {
        indexed: false,
        internalType: "uint256",
        name: "lockTime",
        type: "uint256"
      }
    ],
    name: "CircuitCreated",
    type: "event"
  },
  {
    anonymous: false,
    inputs: [
      {
        indexed: true,
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        indexed: false,
        internalType: "bool",
        name: "pushAll",
        type: "bool"
      },
      {
        indexed: false,
        internalType: "uint8",
        name: "winningPathline",
        type: "uint8"
      },
      {
        indexed: false,
        internalType: "uint256",
        name: "winnerCount",
        type: "uint256"
      }
    ],
    name: "CircuitSettled",
    type: "event"
  },
  {
    anonymous: false,
    inputs: [
      {
        indexed: true,
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        indexed: true,
        internalType: "address",
        name: "player",
        type: "address"
      }
    ],
    name: "EntryPlaced",
    type: "event"
  },
  {
    anonymous: false,
    inputs: [
      {
        indexed: true,
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        indexed: true,
        internalType: "address",
        name: "player",
        type: "address"
      },
      {
        indexed: false,
        internalType: "uint256",
        name: "payout",
        type: "uint256"
      }
    ],
    name: "PrizeClaimed",
    type: "event"
  },
  {
    anonymous: false,
    inputs: [
      {
        indexed: true,
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        indexed: true,
        internalType: "address",
        name: "player",
        type: "address"
      },
      {
        indexed: false,
        internalType: "uint256",
        name: "amount",
        type: "uint256"
      }
    ],
    name: "RefundClaimed",
    type: "event"
  },
  {
    anonymous: false,
    inputs: [
      {
        indexed: true,
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        indexed: false,
        internalType: "uint8",
        name: "nova",
        type: "uint8"
      },
      {
        indexed: false,
        internalType: "uint8",
        name: "ember",
        type: "uint8"
      },
      {
        indexed: false,
        internalType: "uint8",
        name: "tidal",
        type: "uint8"
      },
      {
        indexed: false,
        internalType: "uint8",
        name: "quake",
        type: "uint8"
      }
    ],
    name: "VotesRevealed",
    type: "event"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      }
    ],
    name: "cancelCircuit",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      }
    ],
    name: "claimPrize",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      }
    ],
    name: "claimRefund",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        internalType: "string",
        name: "headline",
        type: "string"
      },
      {
        internalType: "uint256",
        name: "entryFee",
        type: "uint256"
      },
      {
        internalType: "uint256",
        name: "duration",
        type: "uint256"
      }
    ],
    name: "createCircuit",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        internalType: "externalEuint8",
        name: "encryptedChoice",
        type: "bytes32"
      },
      {
        internalType: "bytes",
        name: "proof",
        type: "bytes"
      }
    ],
    name: "enterCircuit",
    outputs: [],
    stateMutability: "payable",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      }
    ],
    name: "getCircuit",
    outputs: [
      {
        components: [
          {
            internalType: "bool",
            name: "exists",
            type: "bool"
          },
          {
            internalType: "string",
            name: "circuitId",
            type: "string"
          },
          {
            internalType: "string",
            name: "headline",
            type: "string"
          },
          {
            internalType: "address",
            name: "creator",
            type: "address"
          },
          {
            internalType: "uint256",
            name: "entryFee",
            type: "uint256"
          },
          {
            internalType: "uint256",
            name: "lockTime",
            type: "uint256"
          },
          {
            internalType: "uint256",
            name: "prizePool",
            type: "uint256"
          },
          {
            internalType: "bool",
            name: "cancelled",
            type: "bool"
          },
          {
            internalType: "bool",
            name: "settled",
            type: "bool"
          },
          {
            internalType: "bool",
            name: "pushAll",
            type: "bool"
          },
          {
            internalType: "uint8",
            name: "winningPathline",
            type: "uint8"
          },
          {
            internalType: "uint256",
            name: "winnerCount",
            type: "uint256"
          },
          {
            internalType: "uint8[4]",
            name: "revealedVotes",
            type: "uint8[4]"
          },
          {
            internalType: "uint256",
            name: "totalEntrants",
            type: "uint256"
          }
        ],
        internalType: "struct RiftParlayCircuit.CircuitSnapshot",
        name: "snapshot",
        type: "tuple"
      }
    ],
    stateMutability: "view",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      }
    ],
    name: "getEntrants",
    outputs: [
      {
        internalType: "address[]",
        name: "",
        type: "address[]"
      }
    ],
    stateMutability: "view",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        internalType: "address",
        name: "user",
        type: "address"
      }
    ],
    name: "getUserChoice",
    outputs: [
      {
        internalType: "bytes32",
        name: "",
        type: "bytes32"
      }
    ],
    stateMutability: "view",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        internalType: "address",
        name: "user",
        type: "address"
      }
    ],
    name: "hasEntered",
    outputs: [
      {
        internalType: "bool",
        name: "",
        type: "bool"
      }
    ],
    stateMutability: "view",
    type: "function"
  },
  {
    inputs: [],
    name: "listCircuitIds",
    outputs: [
      {
        internalType: "string[]",
        name: "",
        type: "string[]"
      }
    ],
    stateMutability: "view",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      }
    ],
    name: "requestVoteReveal",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      }
    ],
    name: "settleCircuit",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function"
  },
  {
    inputs: [
      {
        internalType: "string",
        name: "circuitId",
        type: "string"
      },
      {
        internalType: "uint8[4]",
        name: "votes",
        type: "uint8[4]"
      }
    ],
    name: "submitDecryptedVotes",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function"
  },
  {
    inputs: [],
    name: "MAX_DURATION",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256"
      }
    ],
    stateMutability: "view",
    type: "function"
  },
  {
    inputs: [],
    name: "MIN_DURATION",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256"
      }
    ],
    stateMutability: "view",
    type: "function"
  },
  {
    inputs: [],
    name: "MIN_ENTRY_FEE",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256"
      }
    ],
    stateMutability: "view",
    type: "function"
  }
] as const;
